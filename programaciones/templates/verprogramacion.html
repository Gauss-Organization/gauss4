{% load entidades_extras %}
{% load programaciones_extras %}
<style>
    p {
        text-align: justify;
    }

    .span_periodos {
        color: darkred;
    }

    td, th {
        border: 1px solid grey;
    }

    {% for sb in progsec.saberbas_set.all %}
        #row_sb_botones{{ sb.id }} {
            display: none;
            position: absolute;
            top: 1px;
            right: 35px;
        }
        #row_sb{{ sb.id }} {
            position: relative;
        }
        #row_sb{{ sb.id }}:hover #row_sb_botones{{ sb.id }} {
            display: block;
        }
        #row_sb{{ sb.id }}:hover {
            border-top: 1px solid #ebccd1;
        }
        {% for sap in sb.sitapren_set.all %}
            #row_sap_botones{{ sb.id }} {
                display: none;
                position: absolute;
                top: 1px;
                right: 35px;
            }
            #row_sap{{ sb.id }} {
                position: relative;
            }
            #row_sap{{ sb.id }}:hover #row_sap_botones{{ sb.id }} {
                display: block;
            }
            #row_sap{{ sb.id }}:hover {
                border-top: 1px solid #ebccd1;
            }
        {% endfor %}
    {% endfor %}


</style>
<h1 style="font-variant: small-caps;">Programación Didáctica</h1>
<h2>{{ progsec.nombre }}</h2>
<h3>Fechas de comienzo y fin</h3>
<p>Inicio aproximado: {{ progsec.inicio_clases|date:'Y-m-d' }}</p>
<p>Finalización aproximada: {{ progsec.fin_clases|date:'Y-m-d' }}</p>
{% if progsec.departamento.etapa == 'PRI' or progsec.departamento.etapa == 'INF' %}
    <h3>Coordinador de ciclo responsable de la programación</h3>
    <p>{{ progsec.departamento.jefe.ge.gauser.get_full_name }}</p>
{% else %}
    <h3>Jefe del departamento responsable de la programación</h3>
    <p>{{ progsec.departamento.jefe.ge.gauser.get_full_name }}</p>
{% endif %}
<h3>Docentes implicados en el desarrollo de la programación</h3>
<ul>
    {% for d in progsec.docprogsec_set.all %}
        <li>{{ d.gep.ge.gauser.get_full_name }}</li>
    {% endfor %}
</ul>
<br>

<h3>Listado de competencias específicas</h3>
<p>La superación de {{ progsec.areamateria.nombre }} implica la adquisición de una serie de competencias
    específicas. Todas ellas contribuyen de igual forma a la calificación que finalmente obtendrán sus
    alumunos.</p>
<p>A través de los criterios de evaluación se valora el grado de adquisición de cada
    competencia específica; la media de esas valoraciones será la calificación que el alumnado obtendrá
    en {{ progsec.areamateria.nombre }}.</p>
<h4>Competencias específicas</h4>
{% for cep in progsec.ceprogsec_set.all %}
    <p>{{ cep.ce.orden }}.- {{ cep.ce.nombre }}</p>
{% endfor %}



<p style="color: gray;">Tal y como se ha señalado anteriormente, la calificación
    de {{ progsec.areamateria.nombre }}
    se calculará a través de la siguiente expresión:
</p>

<div class="row">
    <div class="columns large-12" style="text-align: left;">
        calificación {{ progsec.areamateria.nombre }} =
    </div>
</div>
<div style="text-align: center;">
    <div style="border-bottom: 1px solid black;">
        {% for ce in progsec.ceprogsec_set.all %}
            <span title="Calificación obtenida en la competencia específica {{ ce.ce.orden }}"
            >CE{{ ce.ce.orden }}</span>&nbsp;{% if not forloop.last %}&nbsp;+&nbsp;{% endif %}{% endfor %}
    </div>
    <div>
        {{ progsec.ceprogsec_set.all|length }}
    </div>
</div>
<div>
    <p style="color: gray;">En la anterior fórmula, CE1 es la calificación que un alumno obtiene en la
        competencia específica 1,
        <br>En la anterior fórmula, CE2 es la calificación que un alumno obtiene en la
        competencia específica 2,
        <br>...
        <br>CEn sería la calificación obtenida en la competencia específica "n".</p>
</div>


<h3>Peso asociado a cada criterio de evaluación</h3>
<p>Para concretar el nivel de adquisición de cada competencia específica, usted utilizará una serie
    de criterios de evaluación. De este modo, las competencias no las evaluará directamente, sino que lo
    hará a través los citados criterios; que a su vez servirán de referencia para generar la calificación
    obtenida por un/a alumno/a.</p>
<p>Cada criterio de evaluación puede tener, a su vez, un "peso" que determina
    su contribución ponderada a la valoración del grado de adquisición de la competencia específica. Por
    favor, introduzca el peso asociado a cada criterio de evaluación:</p>

<p style="color: gray;">La calificación de cada competencia específica será la media ponderada de las
    calificaciones
    que usted otorgue a cada alumno en cada criterio de evaluación.</p>
<table style="width: 100%;border: 1px black solid;">
    <thead>
    <tr>
        <th>Competencias específicas con sus criterios de evaluación asociados</th>
        <th>Peso</th>
    </tr>
    </thead>
    {% for cep in progsec.ceprogsec_set.all %}
        <thead>
        <tr>
            <th>{{ cep.ce.orden }}.- {{ cep.ce.nombre }}</th>
        </tr>
        </thead>
        <tbody>
        {% for cevp in cep.cevprogsec_set.all %}
            <tr>
                <td>{{ cep.ce.orden }}.{{ cevp.cev.orden }}.- {{ cevp.cev.texto }}</td>
                <td style="text-align: center;">{{ cevp.valor|floatformat }}</td>
            </tr>
        {% endfor %}
        </tbody>
    {% endfor %}
</table>

<div id="cevalponderada{{ progsec.id }}">
    {% with cep=progsec.ceprogsec_set.all.last %}
        {% include "progsec_accordion_content_cevalponderada.html" %}
    {% endwith %}
</div>

<h3>Procedimiento para la adopción de medidas de atención a la diversidad</h3>
{% if progsec.procdiversidad %}
    <p>{{ progsec.procdiversidad }}</p>
{% else %}
    <p style="color: gray;">Todavía no se ha definido el procedimiento para la adopción de
        medidas de atención a la diversidad.</p>
{% endif %}
<h3>Libros o materiales van a ser utilizados para el desarrollo de la materia</h3>

<table id="lista_libros{{ progsec.id }}" style="width: 100%;">
    <thead>
    <tr>
        <th>Nombre</th>
        <th>ISBN</th>
    </tr>
    </thead>
    <tbody>
    {% for libro in progsec.librorecurso_set.all %}
        <tr class="datos_libro{{ libro.id }}">
            <td>{{ libro.nombre }}</td>
            <td>{{ libro.isbn }}</td>
        </tr>
        <tr class="datos_libro{{ libro.id }}">
            <td colspan="2" style="color: grey;">{{ libro.observaciones }}</td>
        </tr>
    {% endfor %}
    </tbody>
</table>

<h3>Actividades extraescolares/complementarias que se van a llevar a cabo</h3>

<table id="lista_actex{{ progsec.id }}" style="width: 100%;">
    <thead>
    <tr>
        <th>Nombre</th>
        <th>Inicio</th>
        <th>Fin</th>
    </tr>
    </thead>
    <tbody>
    {% for actex in progsec.actexcom_set.all %}
        <tr class="datos_actex{{ actex.id }}">
            <td>{{ actex.nombre }}</td>
            <td>{{ actex.inicio|date:'d/m/Y' }}</td>
            <td>{{ actex.fin|date:'d/m/Y' }}</td>
        </tr>
        <tr class="datos_actex{{ actex.id }}">
            <td colspan="4" style="color: grey;">{{ actex.observaciones }}</td>
        </tr>
    {% endfor %}
    </tbody>
</table>


<h3 id="unidades_programacion{{ progsec.id }}">Unidades de programación</h3>
<p>Las unidades de programación organizan la acción didáctica orientada hacia la adquisición de
    competencias. En este proceso se desarrollan los saberes básicos (conocimientos, destrezas y actitudes),
    cuyo aprendizaje resulta necesario para la adquisición de compentecias.</p>
<p>En este apartado, usted debe secuenciar las diferentes unidades de programación asociadas con la materia
    ({{ progsec.areamateria.nombre }} de {{ progsec.areamateria.get_curso_display }}) e indicar el número de
    periodos lectivos que estima serán necesarios para impartir la docencia correspondiente.
    Recuerde que cada unidad de programación puede contener saberes de diferentes bloques.</p>

{% if progsec.instrumentos_utilizados|length > 0 %}
    <p>Para la valoración de los criterios de evaluación esta programación utiliza los siguientes
        procedimientos de evaluación:</p>
    <ol>
        {% for ins in progsec.instrumentos_utilizados %}
            <li>{{ ins }}</li>
        {% endfor %}
    </ol>
{% else %}
    <p style="color: gray;">Todavía no se han definido los procedimientos de evaluación que se utilizarán
        para valorar el grado de adquisición de las competencias específicas.</p>
{% endif %}

<table style="width: 100%;">
    <thead>
    <th>Comienzo</th>
    <th>Nombre de la unidad de programación (UP)</th>
    <th>Periodos</th>
    </thead>
    <tbody>
    {% for saber in progsec.saberbas_set.all %}
        <tr>
            <td style="text-align: center;">{{ saber.comienzo|date:'d-m-Y' }}</td>
            <td>{{ saber.orden }}.- {{ saber.nombre }}</td>
            <td style="text-align: center;">{{ saber.periodos }}</td>
        </tr>
    {% endfor %}
    </tbody>
</table>

<br>
{% include 'progsec_accordion_content_gantt.html' %}