{% load formularios_extras %}
<div class="row">
    <div class="columns large-12" style="color: lightgrey;"><p>Se utiliza para seleccionar una o varias
        fechas del calendario.</p></div>
</div>

<div class="row">
    <div class="columns large-5">
            <div class="row">
                <div class="columns large-12 medium-12 small-12">
                    <table id="table-simplecalendar{{ gfsi.id }}" class="table-simplecalendar" data-simplecalendar="{{ gfsi.id }}">
                        <thead>
                        <tr>
                            <th><a class="simplecalendar-btn btn-prev" data-simplecalendar="{{ gfsi.id }}"><i
                                    class="fa fa-arrow-left"></i></a></th>
                            <th class="monthtitle-simplecalendar" id="month{{ gfsi.id }}" colspan="5"></th>
                            <th><a class="simplecalendar-btn btn-next" data-simplecalendar="{{ gfsi.id }}"><i
                                    class="fa fa-arrow-right"></i></a></th>
                        </tr>
                        <tr>
                            <th class="day-title" title="Lunes">L</th>
                            <th class="day-title" title="Martes">M</th>
                            <th class="day-title" title="Miércoles">X</th>
                            <th class="day-title" title="Jueves">J</th>
                            <th class="day-title" title="Viernes">V</th>
                            <th class="day-title" title="Sábado">S</th>
                            <th class="day-title" title="Domingo">D</th>
                        </tr>
                        </thead>
                        <tbody id="tbody-month{{ gfsi.id }}">
                        <tr>
                            <td class="day-month{{ gfsi.id }}" id="day-month{{ gfsi.id }}-1"></td>
                            <td class="day-month{{ gfsi.id }}" id="day-month{{ gfsi.id }}-2"></td>
                            <td class="day-month{{ gfsi.id }}" id="day-month{{ gfsi.id }}-3"></td>
                            <td class="day-month{{ gfsi.id }}" id="day-month{{ gfsi.id }}-4"></td>
                            <td class="day-month{{ gfsi.id }}" id="day-month{{ gfsi.id }}-5"></td>
                            <td class="day-month{{ gfsi.id }}" id="day-month{{ gfsi.id }}-6"></td>
                            <td class="day-month{{ gfsi.id }}" id="day-month{{ gfsi.id }}-7"></td>
                        </tr>
                        <tr>
                            <td class="day-month{{ gfsi.id }}" id="day-month{{ gfsi.id }}-8"></td>
                            <td class="day-month{{ gfsi.id }}" id="day-month{{ gfsi.id }}-9"></td>
                            <td class="day-month{{ gfsi.id }}" id="day-month{{ gfsi.id }}-10"></td>
                            <td class="day-month{{ gfsi.id }}" id="day-month{{ gfsi.id }}-11"></td>
                            <td class="day-month{{ gfsi.id }}" id="day-month{{ gfsi.id }}-12"></td>
                            <td class="day-month{{ gfsi.id }}" id="day-month{{ gfsi.id }}-13"></td>
                            <td class="day-month{{ gfsi.id }}" id="day-month{{ gfsi.id }}-14"></td>
                        </tr>
                        <tr>
                            <td class="day-month{{ gfsi.id }}" id="day-month{{ gfsi.id }}-15"></td>
                            <td class="day-month{{ gfsi.id }}" id="day-month{{ gfsi.id }}-16"></td>
                            <td class="day-month{{ gfsi.id }}" id="day-month{{ gfsi.id }}-17"></td>
                            <td class="day-month{{ gfsi.id }}" id="day-month{{ gfsi.id }}-18"></td>
                            <td class="day-month{{ gfsi.id }}" id="day-month{{ gfsi.id }}-19"></td>
                            <td class="day-month{{ gfsi.id }}" id="day-month{{ gfsi.id }}-20"></td>
                            <td class="day-month{{ gfsi.id }}" id="day-month{{ gfsi.id }}-21"></td>
                        </tr>
                        <tr>
                            <td class="day-month{{ gfsi.id }}" id="day-month{{ gfsi.id }}-22"></td>
                            <td class="day-month{{ gfsi.id }}" id="day-month{{ gfsi.id }}-23"></td>
                            <td class="day-month{{ gfsi.id }}" id="day-month{{ gfsi.id }}-24"></td>
                            <td class="day-month{{ gfsi.id }}" id="day-month{{ gfsi.id }}-25"></td>
                            <td class="day-month{{ gfsi.id }}" id="day-month{{ gfsi.id }}-26"></td>
                            <td class="day-month{{ gfsi.id }}" id="day-month{{ gfsi.id }}-27"></td>
                            <td class="day-month{{ gfsi.id }}" id="day-month{{ gfsi.id }}-28"></td>
                        </tr>
                        <tr>
                            <td class="day-month{{ gfsi.id }}" id="day-month{{ gfsi.id }}-29"></td>
                            <td class="day-month{{ gfsi.id }}" id="day-month{{ gfsi.id }}-30"></td>
                            <td class="day-month{{ gfsi.id }}" id="day-month{{ gfsi.id }}-31"></td>
                            <td class="day-month{{ gfsi.id }}" id="day-month{{ gfsi.id }}-32"></td>
                            <td class="day-month{{ gfsi.id }}" id="day-month{{ gfsi.id }}-33"></td>
                            <td class="day-month{{ gfsi.id }}" id="day-month{{ gfsi.id }}-34"></td>
                            <td class="day-month{{ gfsi.id }}" id="day-month{{ gfsi.id }}-35"></td>
                        </tr>
                        <tr>
                            <td class="day-month{{ gfsi.id }}" id="day-month{{ gfsi.id }}-36"></td>
                            <td class="day-month{{ gfsi.id }}" id="day-month{{ gfsi.id }}-37"></td>
                            <td class="day-month{{ gfsi.id }}" id="day-month{{ gfsi.id }}-38"></td>
                            <td class="day-month{{ gfsi.id }}" id="day-month{{ gfsi.id }}-39"></td>
                            <td class="day-month{{ gfsi.id }}" id="day-month{{ gfsi.id }}-40"></td>
                            <td class="day-month{{ gfsi.id }}" id="day-month{{ gfsi.id }}-41"></td>
                            <td class="day-month{{ gfsi.id }}" id="day-month{{ gfsi.id }}-42"></td>
                        </tr>
                        </tbody>
                    </table>
                </div>
            </div>
    </div>
    <div class="columns large-7">
        <p style="font-weight: bold">Fechas seleccionadas:</p>
        <div id="list_selected_days{{ gfsi.id }}"></div>
    </div>

</div>

<style>
    .table-calendar {
        width: 100%;
    }

    .monthtitle-simplecalendar {
        text-align: center;
    }

    .day-title {
        text-align: center;
    }

    .day {
        border: 2px solid transparent;
        padding: 2px;
        text-align: center;
        border-radius: 20%;
    }

    .day:hover {
        border: 2px solid #6691CC;
        cursor: pointer;
    }

    .day.today {
        background: #6691CC;
        text-align: center;
        color: white;
        font-weight: bold;
    }

    .wrong-month {
        color: grey;
    }

    .dayselected-simplecalendar {
        background: #cd0a0a;
        border: 2px solid #cd0a0a;
        text-align: center;
        color: white;
        font-weight: bold;
    }
</style>
<script>

    var months = ['Enero', 'Febrero', 'Marzo', 'Abril', 'Mayo', 'Junio', 'Julio', 'Agosto', 'Septiembre', 'Octubre', 'Noviembre', 'Diciembre']
    var currentDate = new Date();

    function buildCalendar_formularios(fromDate, calendar_id) {
        $('.day-month' + calendar_id).empty();
        var monthText = months[currentDate.getMonth()];
        monthText += ' <span class="year">' + currentDate.getFullYear() + '</span>';
        $('#month' + calendar_id).html(monthText);
        //setting current year and month
        var y = fromDate.getFullYear(), m = fromDate.getMonth();
        //first day of the month
        var firstDay = new Date(y, m, 1);
        //last day of the month
        var lastDay = new Date(y, m + 1, 0);
        // Start day of weeks
        var startDayOfWeek = 1;

        // If first day of month is different of startDayOfWeek
        while (firstDay.getDay() !== startDayOfWeek) {
            firstDay.setDate(firstDay.getDate() - 1);
        }
        // If last day of month is different of startDayOfWeek + 7
        while (lastDay.getDay() !== ((startDayOfWeek + 6) % 7)) {
            lastDay.setDate(lastDay.getDate() + 1);
        }

        //For firstDay to lastDay
        var counter_day = 1;
        for (var day = firstDay; day <= lastDay; day.setDate(day.getDate())) {
            //For each row
            for (var n = 0; n < 7; n++) {
                var string_date = day.toLocaleString('es-ES').split(' ')[0]
                var clases = 'day';

                var $day = $('<div class="' + clases + '" data-date="' + string_date + '" data-simplecalendar="' + calendar_id + '">' + day.getDate() + '</div>');

                //if today is this day
                if (day.toDateString() === (new Date()).toDateString()) {
                    $day.addClass('today');
                }

                //if day is not in this month
                if (day.getMonth() !== fromDate.getMonth()) {
                    $day.addClass('wrong-month').removeClass('day');
                }

                $('#day-month' + calendar_id + '-' + counter_day).append($day);
                counter_day++;
                day.setDate(day.getDate() + 1);
            }
        }
    }

    setTimeout(function () {
        var todaydate = new Date();
        buildCalendar_formularios(todaydate, '{{ gfsi.id }}');
    }, 400);
</script>